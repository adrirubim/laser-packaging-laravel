# What to Commit to Git (and What Not To)

**Repository:** [github.com/adrirubim/laser-packaging-laravel](https://github.com/adrirubim/laser-packaging-laravel)

**Policy:** Commit source code, lock files, config templates, and documentation. Never commit secrets (`.env`, keys, tokens), build artifacts (`vendor/`, `node_modules/`, `public/build/`), or IDE-specific files. This keeps the repository secure, reproducible, and audit-friendly.

This document is the single reference for commit policy. It complements `.gitignore` and [CONTRIBUTING.md](../CONTRIBUTING.md). **All documentation committed to the repository must be in English, professional in tone, and aligned with current best practices.**

---

## 1. Do NOT commit (security, secrets, local state)

| Path / pattern | Reason |
|----------------|--------|
| **`.env`** | Contains secrets: `APP_KEY`, `DB_PASSWORD`, API keys, etc. Anyone with repo access would see production credentials. **Never** commit. |
| **`.env.*`** (except `.env.example`) | Same as above; local overrides and backups (e.g. `.env.bak`, `.env.local`, `.env.testing`) may contain real credentials. |
| **`auth.json`**, **`*.pem`**, **`credentials.json`** | Composer/auth and key files. Often contain tokens or private keys. |
| **`/storage/*.key`** | Laravel encryption keys; must stay server-specific. |
| **`/vendor/`** | Installed PHP dependencies. Reproducible via `composer install` from `composer.json` + `composer.lock`. Committing would bloat the repo and duplicate lock file. |
| **`/node_modules/`** | Installed Node dependencies. Same idea: use `package.json` + `package-lock.json` and run `npm ci`. Huge and redundant. |
| **`/public/build/`**, **`/public/hot`** | Built frontend assets and Vite dev server state. Regenerated by `npm run build` or `npm run dev`. |
| **`/bootstrap/ssr`** | Server-side rendering build output; regenerated. |
| **`.phpunit.cache`**, **`.phpunit.result.cache`** | Test runner cache; local and ephemeral. |
| **`/storage/pail`** | Laravel Pail runtime; local. |
| **`Homestead.json`**, **`Homestead.yaml`** | Local Vagrant/Homestead config; can contain paths and box settings that differ per machine. |
| **`patch-package-error.json.gz`** | Temporary patch errors; not part of source. |

**Why it matters:** Secrets in the repo can be leaked to anyone who clones or has access (including CI). Build artifacts and dependencies make the repo huge and conflict-prone; the team should rely on lock files and scripts to reproduce the same environment.

---

## 2. Do NOT commit (IDE / editor, optional tooling)

| Path / pattern | Reason |
|----------------|--------|
| **`.DS_Store`** | macOS metadata; useless for others and can cause noise in diffs. |
| **`.idea/`**, **`.vscode/`**, **`.fleet/`**, **`.nova/`**, **`.zed/`** | IDE/editor config. Often personal or machine-specific. Some teams **do** commit `.vscode/` for shared settings; this project does not. |
| **`.github/copilot/`**, **`.github/copilot-instructions.md`** | Copilot-specific; optional and can be personal. Kept out so the repo stays agent-agnostic. |

**Why it matters:** Internal planning and IDE-specific files stay out of the repository. Public docs live in `docs/` (see [docs/README.md](README.md)). `.github/copilot-instructions.md` is in `.gitignore` and is not committed.

---

## 3. DO commit (source, config, and reproducibility)

| What | Why |
|------|-----|
| **Application code** | `app/`, `config/`, `database/`, `resources/`, `routes/`, `tests/` (except fixtures with real data). This is the product. |
| **Lock files** | `composer.lock`, `package-lock.json`. Ensure everyone and CI get the same dependency versions. |
| **`.env.example`** | Template only (no secrets). Documents required env vars; new devs copy it to `.env` and fill values. |
| **`phpunit.xml`**, **`vite.config.*`**, **`tsconfig.json`**, **ESLint/Prettier config** | Build, test, and lint configuration. Needed to run tests and frontend the same way everywhere. |
| **README, docs, LICENSE, SECURITY, CONTRIBUTING** | Onboarding, standards, and legal. All in English, professional tone, best practices. |
| **`.cursor/`** (this project) | Skills, rules, and docs under `.cursor/skills/`, `.cursor/rules/`, `.cursor/docs/` are **committed** so the whole team and any environment share the same enterprise standards (see [SKILLS_ENTERPRISE.md](../.cursor/docs/SKILLS_ENTERPRISE.md)). |
| **`.github/workflows/`** | CI (tests, lint). Needed so pushes and PRs run the same checks. |
| **`.github/ISSUE_TEMPLATE/`**, **`.github/PULL_REQUEST_TEMPLATE.md`** | Standardised issues and PRs. |
| **Patches** | `patches/` (if used with patch-package) so dependency patches are applied consistently. |

**Why it matters:** Anyone who clones the repo can install deps, copy `.env.example` â†’ `.env`, run migrations and tests, and get the same behavior. CI mirrors that. `.cursor/` in the repo keeps agent behavior consistent for the team.

---

## 4. Optional / per-team choices

| What | This project | Alternative |
|------|--------------|-------------|
| **`.cursor/`** | Committed (skills, rules, docs). | Ignore if you want agent config to be personal only. |
| **`.vscode/`** | Ignored. | Some teams commit recommended extensions and settings. |
| **`.env.testing`** | Ignored (`.env.*`). | Can commit a **template** `.env.testing.example` with no secrets if you want to document test DB config. |

---

## 5. Before pushing (checklist)

- No `.env` or secrets; no `node_modules/` or `vendor/` in the commit.
- Commit `composer.lock` and `package-lock.json` when dependencies change.
- Run the full pipeline (matches CI):
  ```bash
  php scripts/i18n-check.php && ./vendor/bin/pint && npm run format && npm run format:check && npm run lint && npm run types && php artisan config:clear && php artisan test && npm run test -- --run && npm run build
  ```
- Documentation committed to the repository is in English and follows project standards.

See: [CONTRIBUTING.md](../CONTRIBUTING.md), [SECURITY.md](../SECURITY.md).

---

## 6. Preparing for initial push (adrirubim)

Before the first `git push` to `origin`:

1. **Remote:** `git remote add origin https://github.com/adrirubim/laser-packaging-laravel.git` (or update if already set).
2. **Verify:** `.env` is in `.gitignore`; run `git status` to ensure no secrets or `node_modules`/`vendor` are staged.
3. **CI compatibility:** Run the full pipeline (i18n-check, pint, format, format:check, lint, types, config:clear, php artisan test, npm run test -- --run, npm run build).
4. **Documentation:** Ensure `docs/` and root `README.md` reflect the current state; all links point to `adrirubim/laser-packaging-laravel`.
